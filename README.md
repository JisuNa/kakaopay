# 카카오페이 뿌리기 기능 구현하기



## 핵심 문제해결 전략



### 뿌리기  `POST /api/v2/spray`

**예외처리**

- 유저ID 유효성 검사
- 방ID 유효성 검사
- 요청 유ID 방에 있는지 검사
- 뿌리기 인원수가 방 인원수 보다 많은지 검사
- 토큰 생성 정상 검사
- 뿌릴 금액 분배 정상 검사



### 받기 : `POST /api/v2/spray/receive` 



**예외처리**

- 토큰 유효성 검사
- 토큰 만료 여부 검사 (10분)
- 토큰에 해당하는 뿌리기 유효성 검사
- 완료된 뿌리기 여부 검사
- 자신이 뿌리기한 것에 대한 받기 요청인지 검사
- 해당 뿌리기한 사람과 같은 방에 있는지 검사
- 해당 뿌리기를 이미 받은 내역이 있는지 검사



### 조회 : `GET /api/v2/spray` 

**예외처리**

- 토큰 유효성 검사
- 토큰 만료 여부 검사 (7일)
- 뿌리기한 사람인지 검사
